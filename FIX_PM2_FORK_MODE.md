# âœ… PM2 Fork ëª¨ë“œ ìˆ˜ì • ì™„ë£Œ!

## ğŸ” ë¬¸ì œ ì›ì¸
PM2ê°€ **cluster ëª¨ë“œ**ë¡œ ì‹¤í–‰ë˜ë©´ì„œ í¬íŠ¸ 5000ì— ë°”ì¸ë”©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
Amazon Linux 2023ì—ì„œëŠ” **fork ëª¨ë“œ**ê°€ ë” ì•ˆì •ì ì…ë‹ˆë‹¤.

## âœ… í•´ê²° ë°©ë²•
`ecosystem.config.js`ì—ì„œ:
- `exec_mode: 'fork'` ì¶”ê°€ (cluster â†’ fork)
- `max_memory_restart: '200M'` (1G â†’ 200M, t3.microì— ì í•©)

---

## ğŸš€ EC2ì—ì„œ ì¦‰ì‹œ ì‹¤í–‰í•˜ì„¸ìš”!

### í˜„ì¬ ì„œë²„ ì¤‘ì§€ (Ctrl+Cë¡œ node í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ)
```
Ctrl+C
```

### ì—…ë°ì´íŠ¸ ë° ì¬ì‹œì‘
```bash
cd ~/weather-app && \
git pull && \
pm2 start ecosystem.config.js && \
pm2 save && \
pm2 status
```

---

## âœ… ì„±ê³µ í™•ì¸

### 1. PM2 ìƒíƒœ
```bash
pm2 status
```

**ì˜ˆìƒ ê²°ê³¼:**
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name        â”‚ mode â”‚ status â”‚ uptime    â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ weather-app â”‚ fork â”‚ online â”‚ 3s        â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**mode: fork** â† ì´ë ‡ê²Œ ë‚˜ì™€ì•¼ í•©ë‹ˆë‹¤!

### 2. í¬íŠ¸ 5000 ë¦¬ìŠ¤ë‹ í™•ì¸
```bash
sudo netstat -tlnp | grep 5000
```

**ì˜ˆìƒ ê²°ê³¼:**
```
tcp  0  0  :::5000  :::*  LISTEN  12345/node
```

### 3. ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
curl http://localhost:5000
```

**ì˜ˆìƒ ê²°ê³¼:**
HTML ì‘ë‹µì´ ë‚˜ì™€ì•¼ í•©ë‹ˆë‹¤!

### 4. ë¡œê·¸ í™•ì¸
```bash
pm2 logs weather-app --lines 10
```

**ì˜ˆìƒ ê²°ê³¼:**
```
ì„œë²„ê°€ í¬íŠ¸ 5000ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.
```

---

## ğŸŒ ì™¸ë¶€ ì ‘ì†

### 1. Apache í”„ë¡ì‹œ í™œìš© (í¬íŠ¸ 80ìœ¼ë¡œ ì ‘ì†)

Apacheê°€ ì´ë¯¸ 5000ìœ¼ë¡œ í”„ë¡ì‹œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ:

```
http://EC2-PUBLIC-IP/
```

ì´ë ‡ê²Œ ì ‘ì†í•˜ë©´ ìë™ìœ¼ë¡œ 5000 í¬íŠ¸ë¡œ ì—°ê²°ë©ë‹ˆë‹¤!

**ì£¼ì˜**: ì´ë ‡ê²Œ í•˜ë©´ WordPressì™€ ì¶©ëŒë©ë‹ˆë‹¤.

### 2. í¬íŠ¸ 5000 ì§ì ‘ ì ‘ì† (ê¶Œì¥)

AWS ë³´ì•ˆ ê·¸ë£¹ì— 5000 í¬íŠ¸ ì¶”ê°€ í›„:
```
http://EC2-PUBLIC-IP:5000
```

---

## ğŸ”§ Apache í”„ë¡ì‹œ ì„¤ì • ì œê±° (ê¶Œì¥)

WordPressì™€ ë‚ ì”¨ ì•±ì„ ë¶„ë¦¬í•˜ë ¤ë©´:

```bash
# Apache í”„ë¡ì‹œ ì„¤ì • í™•ì¸
sudo ls /etc/httpd/conf.d/

# ë‚ ì”¨ ì•± í”„ë¡ì‹œ ì„¤ì • íŒŒì¼ ì°¾ê¸°
sudo cat /etc/httpd/conf.d/*.conf | grep -B5 "5000"

# í•´ë‹¹ íŒŒì¼ ì‚­ì œ ë˜ëŠ” ì£¼ì„ ì²˜ë¦¬
sudo nano /etc/httpd/conf.d/[ì„¤ì •íŒŒì¼ëª…].conf

# Apache ì¬ì‹œì‘
sudo systemctl restart httpd
```

ê·¸ëŸ¬ë©´:
- `http://EC2-IP` â†’ WordPress (í¬íŠ¸ 80)
- `http://EC2-IP:5000` â†’ ë‚ ì”¨ ì•± (í¬íŠ¸ 5000)

ê¹”ë”í•˜ê²Œ ë¶„ë¦¬ë©ë‹ˆë‹¤!

---

## ğŸ“‹ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

EC2ì—ì„œ:

- [ ] `Ctrl+C`ë¡œ í˜„ì¬ node í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
- [ ] `git pull` ì‹¤í–‰
- [ ] `pm2 start ecosystem.config.js` ì‹¤í–‰
- [ ] `pm2 status` â†’ **mode: fork, status: online** í™•ì¸
- [ ] `sudo netstat -tlnp | grep 5000` â†’ í¬íŠ¸ ë¦¬ìŠ¤ë‹ í™•ì¸
- [ ] `curl http://localhost:5000` â†’ HTML ì‘ë‹µ í™•ì¸
- [ ] AWS ë³´ì•ˆ ê·¸ë£¹ì— TCP 5000 ì¶”ê°€
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ `http://EC2-IP:5000` ì ‘ì†

---

## ğŸ¯ ìµœì¢… ì ‘ì† URL

### ì˜µì…˜ 1: í¬íŠ¸ ë¶„ë¦¬ (ê¶Œì¥)
```
WordPress: http://EC2-PUBLIC-IP
ë‚ ì”¨ ì•±:   http://EC2-PUBLIC-IP:5000
```

### ì˜µì…˜ 2: Apache í”„ë¡ì‹œ ì‚¬ìš©
```
http://EC2-PUBLIC-IP/
```
(í•˜ì§€ë§Œ WordPressì™€ ì¶©ëŒ)

---

**ì§€ê¸ˆ ë°”ë¡œ EC2ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”!** ğŸš€

```bash
# Ctrl+Cë¡œ node ì¤‘ì§€ í›„
cd ~/weather-app && git pull && pm2 start ecosystem.config.js && pm2 save && pm2 status
```

